<!DOCTYPE html>
<html lang="en">
<head>
	<title>Oregon State Hospital - Survey</title>
	<meta name="viewport">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
	<div class="container content">
		<h1>Survey</h1>
		<p>This survey is required for patient roomate placement in the Oregon State Hospital</p>
		<form>
			<div class="form-group">
				<input id="name" type="text" class="form-control" placeholder="Name (Required)">
			</div>
			<div class="form-group">
				<input id="photo" type="text" class="form-control" placeholder="Link Patient Photo (Required)">
			</div>
			<div class="form-group">
				<label for="q1">I don't appreciate authority figures telling me what to do:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q2">I can hear what other people think:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q3">I constantly feel as if I am being followed or monitored:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q4">I consider myself a leader:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q5">My life choices have caused unrest amongst the people in my personal/professional life:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q6">I feel mentally unstable and am in need professional help:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q7">I have a problem with the idea of taking medication perscribed by a doctor:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q8">I feel invincible:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q9">I trust that people are good and have my best interest at heart:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <div class="form-group">
				<label for="q10">This survey was specifically made by the government, to keep tabs on me:</label>
                <form action="/action_page.php">
                    <br>
                    <input type="radio" value="1"> 1: Strongly Disagree<br>
                    <input type="radio" value="2"> 2: Disagree<br>
                    <input type="radio" value="3"> 4: Sometimes<br> 
                    <input type="radio" value="4"> 5: Agree<br>  
                    <input type="radio" value="5"> 6: Strongly Agree<br>
                    <br>   
                </form>
            </div>
            <form action="/action_page.php" method="post">
                <input type="submit" value="Submit">
            </form>
		
        
	</div>

	<footer>
		<div class="container">
			<a href="/home">Oregon State Hospital Roomate Finder</a>
			<span>|</span>
			<a href="https://github.com/yoonslee/FriendFinder">GitHub Repo</a>
		</div>
	</footer>

	<script
	  src="https://code.jquery.com/jquery-3.2.1.min.js"
	  integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
	  crossorigin="anonymous"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</body>
</html>

<script type="text/javascript">
	$("#submitBtn").on("click", function(event) {
		event.preventDefault();
		// Form validation
		var valid = true;
		if($("#name").val() === "" || $("#photo").val() === "") {
			valid = false;
		} else if($("#q1").val() === "empty" || $("#q2").val() === "empty" || $("#q3").val() === "empty" || $("#q4").val() === "empty" || $("#q5").val() === "empty" || $("#q6").val() === "empty" || $("#q7").val() === "empty" || $("#q8").val() === "empty" || $("#q9").val() === "empty" || $("#q10").val() === "empty") {
			valid = false;
		}
		if(valid === true) {
			var newUser = {
				name: $("#name").val().trim(),
				photo: $("#photo").val().trim(),
				scores: [
					$("#q1").val(),
					$("#q2").val(),
					$("#q3").val(),
					$("#q4").val(),
					$("#q5").val(),
					$("#q6").val(),
					$("#q7").val(),
					$("#q8").val(),
					$("#q9").val(),
					$("#q10").val()
				]
			};
			var currentURL = window.location.origin;
			// Ajax call for receiving response after POST req
			$.post(currentURL + "/api/friends", newUser, function(data) {
				$("#roomate").text(data.name);
				$("#roomatePhoto").attr("src", data.photo);
			});
		} else {
			// If a required field is missing, show alert
			alert("Survey is incomplete!");
		}
	});
</script>